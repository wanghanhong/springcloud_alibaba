<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smart.brd.manage.base.mapper.THeartDeviceMapper">


    <select id="tHeartDeviceList" parameterType="com.smart.brd.manage.base.entity.THeartDevice" resultType="com.smart.brd.manage.base.entity.THeartDevice">
        SELECT * from t_heart_device t where t.delete_flag = 0
        <if test="vo.deviceCode != null and vo.deviceCode != '' ">
            and t.device_code = #{vo.deviceCode}
        </if>
        ORDER BY t.create_time desc
    </select>
    <select id="temperatureCurve" resultType="com.smart.brd.manage.base.entity.vo.AnalysisVo" parameterType="com.smart.brd.manage.base.entity.THeartDevice">
        SELECT
        t.create_time as time,
        t.temperature as percent
        FROM
        t_heart_device t
        WHERE
        date_sub( curdate(), INTERVAL 7 DAY ) &lt; date( t.create_time )
        <if test="deviceCode != null and deviceCode != '' ">
            AND t.device_code = #{deviceCode}
        </if>
        ORDER BY t.create_time asc
    </select>
</mapper>
