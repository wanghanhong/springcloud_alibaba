<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smart.device.message.data.mapper.THeartSmokeMapper">

    <select id="selectSmokeLimit" parameterType="com.smart.device.message.data.entity.vo.HeartVo" resultType="com.smart.device.common.message.entity.THeartSmoke">
        select * from t_heart_Smoke t where t.delete_flag = 0
        <if test="vo.imei != null ">
            and t.imei = #{vo.imei}
        </if>
        <if test="vo.deviceId != null ">
            and t.device_id = #{vo.deviceId}
        </if>
        order by t.create_time desc limit 1
    </select>

    <select id="selectSmokeLast" parameterType="java.lang.Long" resultType="com.smart.device.common.install.entity.vo.SdDeviceVo">
        select * from t_heart_Smoke t where t.delete_flag = 0 and t.device_id = #{deviceId} order by t.create_time desc limit 1
    </select>

</mapper>
