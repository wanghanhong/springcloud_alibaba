<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smart.device.message.data.mapper.THeartElectricMapper">

    <select id="selectElectricLimit" parameterType="com.smart.device.message.data.entity.vo.HeartVo" resultType="com.smart.device.common.message.entity.THeartElectric">
        select * from t_heart_electric t where t.delete_flag = 0
        <if test="vo.imei != null ">
            and t.imei = #{vo.imei}
        </if>
        <if test="vo.deviceId != null ">
            and t.device_id = #{vo.deviceId}
        </if>
        order by t.create_time desc limit 1
    </select>

    <select id="selectElectricLast" parameterType="java.lang.Long" resultType="com.smart.device.common.install.entity.vo.SdDeviceVo">
        select * from t_heart_electric t where t.delete_flag = 0 and t.device_id = #{deviceId} order by t.create_time desc limit 1
    </select>

    <insert id="insertDeviceElectric" parameterType="com.smart.device.common.access.entity.vo.DeviceBaseVo" >
        INSERT INTO `db_device_basic`.`t_device_electric`(`id`, `device_name`, `device_code`, `device_type`, `device_type_name`, `parent_type`, `device_model`, `imei`, `product_id`, `product_name`, `protocol`) VALUES
         ( #{vo.id},#{vo.deviceName},#{vo.deviceCode},#{vo.deviceType},#{vo.deviceTypeName},#{vo.parentType},
         #{vo.deviceModel},#{vo.imei},#{vo.productId},#{vo.productName},#{vo.protocol} );

    </insert>

</mapper>
