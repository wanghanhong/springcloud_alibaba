info:
  nacos:
    address: 172.22.1.21:8500
server:
  port: 9201
spring:
  application:
    name: brd-gateway
  main:
    allow-bean-definition-overriding: true
  devtools:
    restart:
      enabled: true
  profiles:
    active: dev
  cloud:
    nacos:
      discovery:
        server-addr: ${info.nacos.address}
      config:
        server-addr: ${info.nacos.address}
        file-extension: yaml
        prefix: ${spring.application.name}
    gateway:
      discovery:
        locator:
          #表明gateway开启服务注册和发现的功能，并且spring cloud gateway自动根据服务发现为每一个服务创建了一个router，这个router将以服务名开头的请求路径转发到对应的服务。
          enabled: true

      routes:
      # 认证中心
      - id: api-auth
        uri: lb://api-auth
        predicates:
        - Path=/auth/**
        filters:
        # 验证码处理
        - CacheRequest
        - ImgCodeFilter
        - StripPrefix=1
      # 养殖管理
      - id: brd-manage-base
        uri: lb://brd-manage-base
        predicates:
        - Path=/brd_manage_base/**
        filters:
        - StripPrefix=1
      # 养殖管理
      - id: brd-sys
        uri: lb://brd-sys
        predicates:
        - Path=/brd_sys/**
        filters:
        - StripPrefix=1
  redis:
    database: 0
    host: 172.22.1.21
    port: 6379
    password: wlw@redis
    timeout: 6000
    jedis:
      pool:
        # 连接池最大连接数（使用负值表示没有限制）
        max-active: 200
        # 连接池最大阻塞等待时间（使用负值表示没有限制）
        max-wait: -1
        max-idle: 10
        min-idle: 0
hystrix:
  command:
    default:  #default全局有效，service id指定应用有效
      execution:
        timeout:
          enabled: true
        isolation:
          thread:
            timeoutInMilliseconds: 5000 #断路器超时时间，默认1000ms
logging:
  level:
    com.alibaba.nacos.client.naming: error
    org.springframework.cloud.gateway: debug